{function createPost(){const o=$("#new-post-form");$(o).submit((i=>{i.preventDefault(),$.ajax({type:"POST",url:"/users/posts/create",data:$(o).serialize(),success:function(i){let c=t(i.data.post,i.data.username);$(".show-posts>ul").prepend(c),e($(" .delete-post-btn",c)),new PostComments(i.data.post._id),$(o)[0].reset(),s($(c).find(".like-post-btn")),n("Post published!!","success")},error:function(t){n(t.responseText,"error")}})}))}let t=function(t,e){return $(`<li id="post-${t._id}">\n        <div class="title-close">\n            <h3>${t.title} - <span class="post-user-name">${e}</span></h3>\n            <a class="like-post-btn" href="/users/like/?type=Post&id=${t._id}">\n                <span>Likes</span>\n                &nbsp;\n                <span class="post-likes-count">0</span>\n            </a>\n            <a href="/users/posts/destroy/${t._id}" class="delete-post-btn">\n                <i class="fa-solid fa-trash"></i>\n            </a>\n            \n        </div>\n        <p>${t.content}</p>\n        <div class="comments-section">\n            \n            <form id="post-${t._id}-comment-form" method="POST" action="/users/comments/create" class="new-comment-form">\n                <input type="text" name="comment-content" placeholder="Comment here ....">\n                <input type="hidden" name="post" value="${t._id}">\n                <input type="submit" value="Submit">\n            </form>\n            \n            <div class="show-comments">\n                <ul id="comment-post-id-${t._id}">\n                    \n                </ul>\n            </div>\n        </div>\n        \n    </li>`)},e=function(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$(`#post-${t.data.post_id}`).remove(),n("Post and associated comments deleted!!","success")},error:function(t){n(t.responseText,"error")}})}))},s=function(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(e){$(t).children(".post-likes-count").text(e.count),n(e.likeAdded?"You just liked the post":"You just disliked the post","success")},error:function(t){n(t.responseText,"error")}})}))},n=function(t,e){new Noty({theme:"relax",text:t,type:e,layout:"topRight",timeout:1500}).show()},o=function(){$(".show-posts>ul>li").each((function(t,n){e($(n).find(".delete-post-btn")),s($(n).find(".like-post-btn"));let o=$(n).prop("id").split("-")[1];new PostComments(o)}))};createPost(),o()}